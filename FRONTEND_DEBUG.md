# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏: —Ç–µ–∫—Å—Ç –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è, –∞–ª–µ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

## ‚úÖ –©–æ –ø—Ä–∞—Ü—é—î:
- Backend —É—Å–ø—ñ—à–Ω–æ —Å–ø–∏—Å—É—î –∫—Ä–µ–¥–∏—Ç–∏
- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å: `‚úÖ Text generation completed`

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –æ—Ç—Ä–∏–º—É—î/–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ç–µ–∫—Å—Ç–∏

---

## üîß –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä –∑ –Ω–æ–≤–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º

```bash
npm run start:dev
```

–¢–µ–ø–µ—Ä —É –∫–æ–Ω—Å–æ–ª—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏:
```
üîÑ Calling OpenRouter API for text generation...
üì¶ OpenRouter response status: 200
üì¶ OpenRouter response data: { ... }
‚úçÔ∏è Generated 3 text variants
üí∞ Deducted 1 credits from user ... New balance: 99
‚úÖ Text generation completed: ...
```

---

## üß™ –ö—Ä–æ–∫ 2: –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ curl —Ç–∞ –ø–æ–¥–∏–≤—ñ—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å

```bash
# 1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è/–í—Ö—ñ–¥
curl -X POST http://localhost:5050/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"YOUR_EMAIL","password":"YOUR_PASSWORD"}'

# –ó–±–µ—Ä–µ–∂—ñ—Ç—å access_token!

# 2. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É
curl -X POST http://localhost:5050/api/ai/generate-text \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{"prompt":"Write a short post about coffee","tone":"friendly","length":"short"}' \
  -v

# –ü—Ä–∞–ø–æ—Ä–µ—Ü—å -v –ø–æ–∫–∞–∂–µ –≤—Å—ñ –¥–µ—Ç–∞–ª—ñ –∑–∞–ø–∏—Ç—É/–≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
```

---

## üìä –û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (200 OK):
```json
{
  "variants": [
    "‚òï Nothing beats the smell of fresh coffee in the morning!",
    "Coffee time is the best time! ‚òï Who's with me?",
    "Just brewed a fresh cup - my day officially starts now! ‚òï"
  ],
  "generation_id": "a308b769-5575-4b9f-b418-59c813894fe1",
  "credits_remaining": 99
}
```

### –Ø–∫—â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ—Ä–æ–∂–Ω—è –∞–±–æ —ñ–Ω—à–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```json
{
  "variants": [],
  "generation_id": "...",
  "credits_remaining": 99
}
```
**–¶–µ –æ–∑–Ω–∞—á–∞—î –ø—Ä–æ–±–ª–µ–º—É –∑ OpenRouter API.**

---

## üîç –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –Ø–∫—â–æ –±–∞—á–∏—Ç–µ:
```
üîÑ Calling OpenRouter API for text generation...
üì¶ OpenRouter response status: 200
üì¶ OpenRouter response data: {
  "choices": [
    {
      "message": {
        "content": "Text variant 1"
      }
    },
    ...
  ]
}
‚úçÔ∏è Generated 3 text variants
```
**‚úÖ Backend –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

### –Ø–∫—â–æ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É:
```
‚ùå AI text generation error: ...
‚ùå Error response: { ... }
‚ùå Error status: 401
```
**‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –∑ OpenRouter API –∫–ª—é—á–µ–º –∞–±–æ –∫—Ä–µ–¥–∏—Ç–∞–º–∏**

---

## üåê –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Network –∑–∞–ø–∏—Ç–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

### –£ Chrome DevTools (F12):
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Network**
2. –ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ
3. –ó–Ω–∞–π–¥—ñ—Ç—å –∑–∞–ø–∏—Ç –¥–æ `/api/ai/generate-text`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

#### ‚úÖ Request (—â–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —Ñ—Ä–æ–Ω—Ç):
```json
POST http://localhost:5050/api/ai/generate-text
Headers:
  Authorization: Bearer eyJhbGciOiJIUz...
  Content-Type: application/json
Body:
  {
    "prompt": "...",
    "tone": "friendly",
    "length": "medium"
  }
```

#### ‚úÖ Response (—â–æ –ø–æ–≤–µ—Ä—Ç–∞—î backend):
```json
Status: 200 OK
Body:
  {
    "variants": [...],
    "generation_id": "...",
    "credits_remaining": 99
  }
```

---

## üêõ –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è:

### 1. **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –æ—Ç—Ä–∏–º—É—î `variants`**

**–ü—Ä–∏—á–∏–Ω–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—á—ñ–∫—É—î —ñ–Ω—à–µ –ø–æ–ª–µ

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É:**
```typescript
// –ú–æ–∂–µ –±—É—Ç–∏:
response.data.text    // ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
response.data.result  // ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

// –ú–∞—î –±—É—Ç–∏:
response.data.variants  // ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

### 2. **OpenRouter –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—à–∏–π —Ñ–æ—Ä–º–∞—Ç**

**–Ø–∫—â–æ —É –ª–æ–≥–∞—Ö –±–∞—á–∏—Ç–µ —â–æ OpenRouter –ø–æ–≤–µ—Ä—Ç–∞—î:**
```json
{
  "id": "...",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "Generated text here"
      }
    }
  ]
}
```

**–¶–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç!** Backend –º–∞—î –π–æ–≥–æ –æ–±—Ä–æ–±–∏—Ç–∏.

### 3. **CORS –ø–æ–º–∏–ª–∫–∞**

**–Ø–∫—â–æ —É –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞:**
```
Access to XMLHttpRequest at 'http://localhost:5050/api/ai/generate-text' 
from origin 'http://localhost:3000' has been blocked by CORS policy
```

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `.env`:
```env
CORS_ORIGINS=http://localhost:3000,http://localhost:5050,http://localhost:5051
```

### 4. **401 Unauthorized**

**–ü—Ä–∏—á–∏–Ω–∏:**
- –¢–æ–∫–µ–Ω –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π
- –¢–æ–∫–µ–Ω –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —É –∑–∞–≥–æ–ª–æ–≤–∫—É
- JWT_SECRET –Ω–µ –∑–±—ñ–≥–∞—î—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–ª–æ–≥—ñ–Ω—å—Ç–µ—Å—å —Ç–∞ –æ—Ç—Ä–∏–º–∞–π—Ç–µ –Ω–æ–≤–∏–π —Ç–æ–∫–µ–Ω

### 5. **OpenRouter API –æ–±–º–µ–∂–µ–Ω–Ω—è**

**–Ø–∫—â–æ –±–∞—á–∏—Ç–µ:**
```
‚ùå Error status: 402
‚ùå Error response: { "error": "Insufficient credits" }
```

**–†—ñ—à–µ–Ω–Ω—è:** –ü–æ–ø–æ–≤–Ω—ñ—Ç—å –±–∞–ª–∞–Ω—Å OpenRouter –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å –º–æ–¥–µ–ª—å:
```typescript
model: 'openai/gpt-3.5-turbo'  // –ü–ª–∞—Ç–Ω–∞
// –ù–∞ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—É:
model: 'meta-llama/llama-3.2-3b-instruct:free'
```

---

## üîÑ –ö—Ä–æ–∫ 5: –Ø–∫—â–æ OpenRouter –Ω–µ –ø—Ä–∞—Ü—é—î - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É

### –í–∞—Ä—ñ–∞–Ω—Ç –ê: –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –º–æ–¥–µ–ª—å OpenRouter

–ó–∞–º—ñ–Ω—ñ—Ç—å —É `src/ai/ai.service.ts`:
```typescript
model: 'meta-llama/llama-3.2-3b-instruct:free'  // –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞!
// –ê–±–æ
model: 'google/gemma-2-9b-it:free'
```

### –í–∞—Ä—ñ–∞–Ω—Ç –ë: Mockup –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É

–¢–∏–º—á–∞—Å–æ–≤–æ –∑–∞–º—ñ–Ω—ñ—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –Ω–∞ mock:
```typescript
// –£ src/ai/ai.service.ts
async generateText(...) {
  // –ó–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ API –≤–∏–∫–ª–∏–∫
  const variants = [
    `[${tone.toUpperCase()}] ${prompt} - –≤–∞—Ä—ñ–∞–Ω—Ç 1`,
    `[${tone.toUpperCase()}] ${prompt} - –≤–∞—Ä—ñ–∞–Ω—Ç 2`,
    `[${tone.toUpperCase()}] ${prompt} - –≤–∞—Ä—ñ–∞–Ω—Ç 3`
  ];
  
  return {
    variants,
    generation_id: this.generateId(),
    credits_remaining: 99
  };
}
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –∑ –Ω–æ–≤–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
- [ ] –£ –ª–æ–≥–∞—Ö —î –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ OpenRouter –≤—ñ–¥–ø–æ–≤—ñ–¥—å
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ curl - –æ—Ç—Ä–∏–º–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ Network tab —É –±—Ä–∞—É–∑–µ—Ä—ñ
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —â–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —á–∏—Ç–∞—î `response.data.variants`
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ OpenRouter –±–∞–ª–∞–Ω—Å/–ª—ñ–º—ñ—Ç–∏

---

## üìû –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä** –∑ –Ω–æ–≤–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
2. **–°–ø—Ä–æ–±—É–π—Ç–µ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç**
3. **–°–∫–æ–ø—ñ—é–π—Ç–µ –ª–æ–≥–∏** –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
4. **–°–∫–æ–ø—ñ—é–π—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å** –∑ Network tab –±—Ä–∞—É–∑–µ—Ä–∞
5. **–ü–æ–¥—ñ–ª—ñ—Ç—å—Å—è –ª–æ–≥–∞–º–∏** –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–û—Å–æ–±–ª–∏–≤–æ –≤–∞–∂–ª–∏–≤–æ –ø–æ–±–∞—á–∏—Ç–∏:
- `üì¶ OpenRouter response data: ...` - —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î API
- Network Response —É –±—Ä–∞—É–∑–µ—Ä—ñ - —â–æ –æ—Ç—Ä–∏–º—É—î —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

–¶–µ –¥–æ–ø–æ–º–æ–∂–µ —Ç–æ—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –¥–µ –ø—Ä–æ–±–ª–µ–º–∞! üîç

